!function(){"use strict";var e=1===angular.version.major&&0===angular.version.minor;angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(n,a,i){var l=".rangeSlider",t={disabled:!1,orientation:"horizontal",step:0,decimalPlaces:0,showValues:!0,preventEqualMinMax:!1,attachHandleValues:!1},s=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},r=s.start+l,o=s.move+l,d=s.end+l,u=s.over+l,m=s.out+l,c=function(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(e){return["x","y"]}},f=function(e){return e<0?0:e>100?100:e},g=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v={disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@",getterSetter:"@"};return e&&(v.disabled="=",v.modelMin="=",v.modelMax="="),{restrict:"A",replace:!0,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:v,link:function(e,s,v,h){function p(n){return e.getterSetter?arguments.length?e.modelMin(n):e.modelMin():arguments.length?e.modelMin=n:e.modelMin}function M(n){return e.getterSetter?arguments.length?e.modelMax(n):e.modelMax():arguments.length?e.modelMax=n:e.modelMax}function x(e){"min"===e?(angular.element(E[0]).css("display","none"),angular.element(E[1]).css("display","block")):"max"===e?(angular.element(E[0]).css("display","block"),angular.element(E[1]).css("display","none")):(angular.element(E[0]).css("display","block"),angular.element(E[1]).css("display","block"))}function b(e){e?y.addClass("ngrs-disabled"):y.removeClass("ngrs-disabled")}function w(){e.min>e.max&&D("min must be less than or equal to max"),angular.isDefined(e.min)&&angular.isDefined(e.max)&&(g(e.min)||D("min must be a number"),g(e.max)||D("max must be a number"),j=e.max-e.min,k=[e.min,e.max],H())}function H(){if(p()>M()&&(V("modelMin must be less than or equal to modelMax"),p(M())),(angular.isDefined(p())||"min"===e.pinHandle)&&(angular.isDefined(M())||"max"===e.pinHandle)){g(p())||("min"!==e.pinHandle&&V("modelMin must be a number"),p(e.min)),g(M())||("max"!==e.pinHandle&&V("modelMax must be a number"),M(e.max));var n,i,l=f((p()-e.min)/j*100),t=f((M()-e.min)/j*100);if(e.attachHandleValues&&(n=l,i=t),p(Math.max(e.min,p())),M(Math.min(e.max,M())),e.filter&&e.filterOptions)e.filteredModelMin=a(e.filter)(p(),e.filterOptions),e.filteredModelMax=a(e.filter)(M(),e.filterOptions);else if(e.filter){var s,r,o=e.filter.split(":"),d=e.filter.split(":")[0],u=o.slice().slice(1);s=(u=u.map(function(e){return g(e)?+e:'"'==e[0]&&'"'==e[e.length-1]||"'"==e[0]&&"'"==e[e.length-1]?e.slice(1,-1):void 0})).slice(),r=u.slice(),s.unshift(p()),r.unshift(M()),e.filteredModelMin=a(d).apply(null,s),e.filteredModelMax=a(d).apply(null,r)}else e.filteredModelMin=p(),e.filteredModelMax=M();e.min===e.max&&p()==M()?(angular.element(E[0]).css(C,"0%"),angular.element(E[1]).css(C,"100%"),e.attachHandleValues&&(angular.element(F[0]).css(C,"0%"),angular.element(F[1]).css(C,"100%")),angular.element(q).css(C,"0%").css(P,"0%")):(angular.element(E[0]).css(C,l+"%"),angular.element(E[1]).css(C,t+"%"),e.attachHandleValues&&(angular.element(F[0]).css(C,n+"%"),angular.element(F[1]).css(C,i+"%"),angular.element(F[1]).css(P,"auto")),angular.element(q).css(C,l+"%").css(P,100-t+"%"),l>95&&angular.element(E[0]).css("z-index",3))}}function $(a){var i=E[a];i.bind(r+"X",function(t){var s=(0===a?"ngrs-handle-min":"ngrs-handle-max")+"-down",r=((0===a?p():M())-e.min)/j*100,u=c(t),m=u,g=!1;angular.isFunction(e.onHandleDown)&&e.onHandleDown(),angular.element("body").bind("selectstart"+l,function(){return!1}),e.disabled||(z=!0,i.addClass("ngrs-down"),y.addClass("ngrs-focus "+s),angular.element("body").addClass("ngrs-touching"),n.bind(o,function(n){n.preventDefault();var l,t,s=c(n),o=e.step/j*100,d=((0===a?M():p())-e.min)/j*100;"x"!==s[0]&&(s[0]-=u[0],s[1]-=u[1],l=[m[0]!==s[0],m[1]!==s[1]],t=r+100*s[S]/(S?y.height():y.width()),t=f(t),e.preventEqualMinMax&&(0===o&&(o=1/j*100),0===a?d-=o:1===a&&(d+=o)),0===a?t=t>d?d:t:1===a&&(t=t<d?d:t),e.step>0&&t<100&&t>0&&(t=Math.round(t/o)*o),t>95&&0===a?i.css("z-index",3):i.css("z-index",""),l[S]&&t!=g&&(0===a?p(parseFloat(parseFloat(t*j/100+e.min).toFixed(e.decimalPlaces))):1===a&&M(parseFloat(parseFloat(t*j/100+e.min).toFixed(e.decimalPlaces))),e.$apply(),g=t),m=s)}).bind(d,function(){angular.isFunction(e.onHandleUp)&&e.onHandleUp(),n.off(o),n.off(d),angular.element("body").removeClass("ngrs-touching"),z=!1,i.removeClass("ngrs-down"),i.removeClass("ngrs-over"),y.removeClass("ngrs-focus "+s)}))}).on(u,function(){i.addClass("ngrs-over")}).on(m,function(){z||i.removeClass("ngrs-over")})}function D(n){throw e.disabled=!0,new Error("RangeSlider: "+n)}function V(e){i.warn(e)}var y=angular.element(s),E=[s.find(".ngrs-handle-min"),s.find(".ngrs-handle-max")],F=[s.find(".ngrs-value-min"),s.find(".ngrs-value-max")],q=s.find(".ngrs-join"),C="left",P="right",S=0,k=[0,0],j=0,z=!1;e.filteredModelMin=p(),e.filteredModelMax=M(),v.$observe("disabled",function(n){angular.isDefined(n)||(e.disabled=t.disabled),e.$watch("disabled",b)}),v.$observe("orientation",function(n){angular.isDefined(n)||(e.orientation=t.orientation);for(var a,i=e.orientation.split(" "),l=0,s=i.length;l<s;l++)i[l]="ngrs-"+i[l];a=i.join(" "),y.addClass(a),"vertical"!==e.orientation&&"vertical left"!==e.orientation&&"vertical right"!==e.orientation||(C="top",P="bottom",S=1)}),v.$observe("step",function(n){angular.isDefined(n)||(e.step=t.step)}),v.$observe("decimalPlaces",function(n){angular.isDefined(n)||(e.decimalPlaces=t.decimalPlaces)}),v.$observe("showValues",function(n){angular.isDefined(n)?e.showValues="false"!==n:e.showValues=t.showValues}),v.$observe("pinHandle",function(n){angular.isDefined(n)?e.pinHandle="min"===n||"max"===n?n:null:e.pinHandle=null,e.$watch("pinHandle",x)}),v.$observe("preventEqualMinMax",function(n){angular.isDefined(n)?e.preventEqualMinMax="false"!==n:e.preventEqualMinMax=t.preventEqualMinMax}),v.$observe("attachHandleValues",function(n){angular.isDefined(n)?"true"===n||""===n?(e.attachHandleValues=!0,s.find(".ngrs-value-runner").addClass("ngrs-attached-handles")):e.attachHandleValues=!1:e.attachHandleValues=t.attachHandleValues}),e.$watch("min",w),e.$watch("max",w),e.$watch(function(){return p()},H),e.$watch(function(){return M()},H),e.$on("$destroy",function(){y.off(l),angular.element("body").off(l),n.off(l);for(var e=0,a=E.length;e<a;e++)E[e].off(l),E[e].off(l+"X")}),y.bind("selectstart"+l,function(e){return!1}).bind("click",function(e){e.stopPropagation()}),$(0),$(1)}}}]),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()}();
