angular.module("bw.paging",[]).directive("paging",function(){function t(t,e,a){t.$watchCollection("[page,pageSize,total,disabled]",function(){o(t,a)})}function e(t,e){return'<ul data-ng-hide="Hide" data-ng-class="ulClass"> <li title="{{Item.title}}" data-ng-class="Item.liClass" data-ng-repeat="Item in List"> <a '+(e.pgHref?'data-ng-href="{{Item.pgHref}}" ':"href ")+'data-ng-class="Item.aClass" data-ng-click="Item.action()" data-ng-bind="Item.value"></a> </li></ul>'}function a(t,e){t.List=[],t.Hide=!1,t.page=parseInt(t.page)||1,t.total=parseInt(t.total)||0,t.adjacent=parseInt(t.adjacent)||1,t.pgHref=t.pgHref||"",t.dots=t.dots||"...",t.ulClass=t.ulClass||"pagination pagination-sm",t.activeClass=t.activeClass||"active",t.disabledClass=t.disabledClass||"disabled",t.textFirst=t.textFirst||"<<",t.textLast=t.textLast||">>",t.textNext=t.textNext||">",t.textPrev=t.textPrev||"<",t.textFirstClass=t.textFirstClass||"",t.textLastClass=t.textLastClass||"",t.textNextClass=t.textNextClass||"",t.textPrevClass=t.textPrevClass||"",t.textTitlePage=t.textTitlePage||"Page {page}",t.textTitleFirst=t.textTitleFirst||"First Page",t.textTitleLast=t.textTitleLast||"Last Page",t.textTitleNext=t.textTitleNext||"Next Page",t.textTitlePrev=t.textTitlePrev||"Previous Page",t.hideIfEmpty=s(t,e.hideIfEmpty),t.showPrevNext=s(t,e.showPrevNext),t.showFirstLast=s(t,e.showFirstLast),t.scrollTop=s(t,e.scrollTop),t.isDisabled=s(t,e.disabled)}function s(t,e){return!!angular.isDefined(e)&&!!t.$parent.$eval(e)}function i(t,e){t.page>e&&(t.page=e),t.page<=0&&(t.page=1),t.adjacent<=0&&(t.adjacent=2),e<=1&&(t.Hide=t.hideIfEmpty)}function l(t,e){t.page!=e&&(t.isDisabled||(t.page=e,t.pagingAction({page:t.page,pageSize:t.pageSize,total:t.total}),t.scrollTop&&scrollTo(0,0)))}function r(t,e,a){if(!(!t.showPrevNext&&!t.showFirstLast||e<1)){var s,i,r;if("prev"===a){s=t.page-1<=0;var n=t.page-1<=0?1:t.page-1;t.showFirstLast&&(i={value:t.textFirst,title:t.textTitleFirst,aClass:t.textFirstClass,page:1}),t.showPrevNext&&(r={value:t.textPrev,title:t.textTitlePrev,aClass:t.textPrevClass,page:n})}else{s=t.page+1>e;var g=t.page+1>=e?e:t.page+1;t.showPrevNext&&(i={value:t.textNext,title:t.textTitleNext,aClass:t.textNextClass,page:g}),t.showFirstLast&&(r={value:t.textLast,title:t.textTitleLast,aClass:t.textLastClass,page:e})}var p=function(e,a){return{title:e.title,aClass:e.aClass,value:e.aClass?"":e.value,liClass:a?t.disabledClass:"",pgHref:a?"":t.pgHref.replace(d,e.page),action:function(){a||l(t,e.page)}}};if(t.isDisabled&&(s=!0),i){var x=p(i,s);t.List.push(x)}if(r){var o=p(r,s);t.List.push(o)}}}function n(t,e,a){var s=0;for(s=t;s<=e;s++){var i=a.pgHref.replace(d,s),r=a.page==s?a.activeClass:"";a.isDisabled&&(i="",r=a.disabledClass),a.List.push({value:s,title:a.textTitlePage.replace(d,s),liClass:r,pgHref:i,action:function(){l(a,this.value)}})}}function g(t){t.List.push({value:t.dots,liClass:t.disabledClass})}function p(t,e){n(1,2,t),3!=e&&g(t)}function x(t,e,a){a!=t-2&&g(e),n(t-1,t,e)}function o(t,e){(!t.pageSize||t.pageSize<=0)&&(t.pageSize=1);var s=Math.ceil(t.total/t.pageSize);a(t,e),i(t,s);var l,g,o=2*t.adjacent+2;r(t,s,"prev"),s<=o+2?n(l=1,s,t):t.page-t.adjacent<=2?(n(l=1,g=1+o,t),x(s,t,g)):t.page<s-(t.adjacent+2)?(l=t.page-t.adjacent,g=t.page+t.adjacent,p(t,l),n(l,g,t),x(s,t,g)):(g=s,p(t,l=s-o),n(l,g,t)),r(t,s,"next")}var d=/\{page\}/g;return{restrict:"EA",link:t,template:e,scope:{page:"=",pageSize:"=",total:"=",disabled:"@",dots:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",pagingAction:"&",pgHref:"@",textFirst:"@",textLast:"@",textNext:"@",textPrev:"@",textFirstClass:"@",textLastClass:"@",textNextClass:"@",textPrevClass:"@",textTitlePage:"@",textTitleFirst:"@",textTitleLast:"@",textTitleNext:"@",textTitlePrev:"@"}}});
